== Gitの基本
:chapter: {counter:chapter}

=== 新規でローカルリポジトリを作ろう

. 「Git Bash」を起動する

. プロジェクトのディレクトリを作成し、直下に移動する
+
[[app-listing]]
[source,git]
----
mkdir [ディレクトリ名]
cd [ディレクトリ名]
----

. 下記のコマンドを投入し、ローカルリポジトリを作成する
+
[[app-listing]]
[source,0.git]
----
git init
----

=== リモートリポジトリを元にローカルリポジトリを作ろう

. リモートリポジトリのURLを入手する

. 「Git Bash」を起動する

. プロジェクトのディレクトリを作成したいディレクトリの直下に移動する
+
[[app-listing]]
[source,git]
----
cd [ディレクトリ名]
----

. 下記のコマンドを投入し、リモートリポジトリを複製する
+
[[app-listing]]
[source,git]
----
git clone [リモートリポジトリのURL]
----

=== ファイルの変更をステージに追加しよう

*_Q . なぜステージ領域を使いますか？_*

**A . リポジトリへ変更したい変更だけを選択するため。**

. 下記のコマンドを投入し、ファイルの変更をステージに追加する
+
[[app-listing]]
[source,git]
.変更範囲を指定
----
git add [ファイル名またはディレクトリ名]
----
+
[[app-listing]]
[source,git]
.全範囲を指定
----
git add .
----

=== ファイルの変更を記録しよう

. 下記のコマンドを投入し、ファイルの変更を記録する
+
[[app-listing]]
[source,git]
.optionなし
----
git commit
----

. エディターが立ち上がる

. エディターにコミットメッセージを記載し、保存する

. ターミナルを確認し、コミットメッセージ、コミットした内容が表示されていることを確認する

=== どのファイルが変更されたかを確認しよう

. 下記のコマンドを投入し、ファイルの変更を確認する
+
[[app-listing]]
[source,git]
----
git status
----

. ターミナルを確認し、ワークツリーとステージ、ステージとコミットの変更点を確認する

=== ファイルの変更内容を確認しよう

. 下記のコマンドを投入し、ファイルの変更を確認する
+
[[app-listing]]
[source,git]
.ワークツリーとステージ
----
git diff [ファイル名]
----
+
[[app-listing]]
[source,git]
.ステージとコミット
----
git diff --staged [ファイル名]
----

. ターミナルを確認し、ワークツリーとステージ、ステージとコミットの変更点を確認する

=== ファイルを削除しよう

. 下記のコマンドを投入し、ファイルを削除する
+
[[app-listing]]
[source,git]
.リポジトリとワークツリーから削除する
----
git rm [ファイル名]
git rm [ディレクトリ名]
----
+
[[app-listing]]
[source,git]
.リポジトリからのみ削除する
----
git rm --cached [ファイル名]
----

. 「ls」または「git status」で削除されていることを確認する

=== ファイルを移動（またはリネーム）しよう

. 下記のコマンドを投入し、ファイルを移動する
+
[[app-listing]]
[source,git]
----
git mv [旧ファイル名] [新ファイル名]
----
下記を順に実行するのと同じ。
+
[[app-listing]]
[source,git]
----
mv [旧ファイル名] [新ファイル名]
git rm [旧ファイル名]
git add [新ファイル名]
----

. 「ls」または「git status」で移動されていることを確認する

=== ファイルをリモートリポジトリに記録しよう

. リモートリポジトリを作成する
+
*Githubの場合*
+
.. Githubにログインする
.. 右上のプロフィールメニューから「Your Repository」をクリックする
.. 表示された画面の「Repository」タブをクリックする
.. btn:[NEW]をクリックする
.. リポジトリ名を入力し、btn:[Create Repository]をクリックする
.. リポジトリが作成されたことを確認する

. 下記のコマンドを投入し、リモートリポジトリを設定する
+
[[app-listing]]
[source,git]
----
git remote add [リモート名] [リモートリポジトリのアドレス]
----

. 下記のコマンドを投入し、ファイルをリモートリポジトリに記録する
+
[[app-listing]]
[source,git]
----
git push [リモート名] [ブランチ名]
----

. リモートリポジトリが更新されていることを確認する

=== コマンドにエイリアスをつけよう

. 下記のコマンドを投入し、エイリアスを設定する
+
[[app-listing]]
[source,git]
----
git config --global alias.[エイリアス名] [コマンド名]
----
+
[[app-listing]]
[source,git]
----
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.br branch
git config --global alias.co checkout
----

=== バージョン管理しないファイルを無視しよう

*_Q . どんなファイルはバージョン管理しない？_*

**A . 機密情報やチーム開発に利用しないファイル** +
**.gitignoreファイルを利用する**

. 「.gitignore」ファイルを追加し、中身に無視したいファイル名やディレクトリ名を記載する

=== ワークツリーのファイルの変更を元に戻そう

. 下記のコマンドを投入し、ファイルをステージの状態に戻す
+
[[app-listing]]
[source,git]
.変更範囲を指定
----
git checkout -- [ファイル名またはディレクトリ名]
----
+
[[app-listing]]
[source,git]
.全範囲を指定
----
git checkout -- .
----

. ワークツリーの内容が戻っていることを確認する

=== ステージのファイルの変更を元に戻そう

. 下記のコマンドを投入し、ファイルをステージの状態に戻す
+
[[app-listing]]
[source,git]
.変更範囲を指定
----
git reset HEAD [ファイル名またはディレクトリ名]
----
+
[[app-listing]]
[source,git]
.全範囲を指定
----
git reset HEAD .
----

. ステージの内容が戻っていることを確認する

[NOTE]
====
このコマンドでワークツリーへは何も変化が起きないことに注意。
====

=== 直前のコミットをやり直そう

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
----
git commit --amend
----

. コミットの内容が戻っていることを確認する

[WARNING]
====
このコマンドはリモートリポジトリにプッシュしたコミットは修正しないこと。プッシュした内容を修正したい場合は、追加で過去のコミットは取り消さず、修正したものを改めてコミットをする。
====

=== リモートリポジトリの情報を確認しよう

. 下記のコマンドを投入し、リモートリポジトリの情報を確認する
+
[[app-listing]]
[source,git]
.リモート名表示
----
git remote
----
+
[[app-listing]]
[source,git]
.リモート名とURLを表示
----
git remote -v
----

. リモートリポジトリの内容を確認する

=== リモートリポジトリを登録しよう

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
.リモート名表示
----
git remote add <リモート名> <リモートURL>
----

=== リモートリポジトリの変更を取得しよう1

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
.リモート名表示
----
git fetch <リモート名>
----

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
.リモート名表示
----
git merge <リモート名>/<ブランチ名>
----

. マージメッセージ

=== リモートリポジトリの変更を取得しよう2

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
.リモート名表示
----
git pull <リモート名> <ブランチ名>
----

. マージメッセージ

[WARNING]
====
pullは現在のブランチにmergeする。 +
自分のカレントブランチを意識しないと意図しないマージをしてしまうので、注意。
====

=== リモートリポジトリの詳細情報を確認しよう

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
.リモート名表示
----
git remote show <リモート名>
----

. マージメッセージ


=== リモートリポジトリの情報を編集しよう

. 下記のコマンドを投入し、コミットをひとつ前の状態に戻す
+
[[app-listing]]
[source,git]
----
git remote rename <旧リモート名>　<新リモート名>
----
+
[[app-listing]]
[source,git]
----
git remote rm <リモート名>
----

. マージメッセージ

