//プロパティ
:lang: ja 
:doctype: articles
:toc: left
:toclevels: 3
:toc-title: 目次
:sectnums:
:sectnumlevels: 4
:sectlinks:
:imagesdir: images
:icons: font
:source-highlighter: coderay
:example-caption: 例
:table-caption: 表
:figure-caption: 図
:docname: Git NOTE
:author: Ponpokopon

// 本文
= {docname}

== Gitってなに？
ファイルのバージョン管理するソフトウェア。

* ファイルの最新の状態がわかる
* いつ・誰が・何を変更したかもわかる
* 以前の状態に戻せる
* 複数人での編集に対応している

=== Gitの歴史
リーナス・トーバルズがLinuxのカーネル開発で使用されていたバージョン管理システムのライセンス変更に伴い、次期バージョン管理システムを検討し始めたが、高度な要求水準を満たすものがなかった。

2005年からGitのプログラム開発が開始。

* スピード
* シンプルな設計
* ブランチが並列で開発可能
* 大規模プロジェクトが効率的に行える

=== GitHubってなに？
クリスワンストラスが創業者のサービス。コード（Gitリポジトリ）のホスティングサービス。

* プルリクエストで複数人開発
** 変更の取り込みをリクエスト、コミュニケーションが可能
** コードレビューがしやすくなった
* 世界中のチームがGitHub上で開発可能
** 一般のエンジニアがオープンソース開発に参加可能

他にもBitbucketなどのホスティングサービスもある。

== Git環境構築

=== Gitのインストール

. 下記のサイトからGit for Windowsのインストーラをダウンロードする。
+
link:https://gitforwindows.org/[Git for Windows]

. 全部初期設定のまま、インストールする。

. インストールした中にある「Git Bash」を起動し、下記のコマンドを投入する。
+
[source,git]
----
git -version
----

. インストールしたバージョンが表示されることを確認する。


=== Githubへの登録

. 下記のサイトからGithubへサインアップする。
+
link:https://github.com/[Github]

. Email認証を行う。

. Githubにログインできることを確認する。

=== Gitの初期設定

. ターミナル（Git Bash）を起動する。

. 下記のコマンドを投入し、ユーザ名を登録する。
+
[source,git]
----
git config --global user.name "hogehoge"
----
. 下記のコマンドを投入し、メールアドレスを登録する。
+
[source,git]
----
git config --global user.email hoge@hoge.com
----

. 下記のコマンドを投入し、エディターを設定する。
+
[[app-listing]]
[source,git]
.Visual Studio Code
----
git config --global core.editor 'code --wait'
----
+
[[app-listing]]
[source,git]
.Atom
----
git config --global core.editor 'atom --wait'
----

. 下記のコマンドを投入し、設定を確認する。
+
[[app-listing]]
[source,git]
----
git config user.name // <1>
git config user.email // <2>
git config core.editor // <3>
git config --list //<4>
----
<1> ユーザ名表示
<2> メールアドレス表示
<3> エディター表示
<4> 全設定をリスト表示

[Tips]
====
ここで設定した設定は「C:\\Users\username\.gitconfig」に保存されている。
====

== Gitの仕組み

=== Gitのメリット

_Q.Gitのバージョン管理ではスナップショットで保存しているか？それとも差分で保存しているか？_

A.スナップショット

まるまるデータを保存していくため、ブランチを切ったり、マージしたりがしやすくなった。

コミットをたどることで以前の状態に辿りながら戻せる。

=== Gitの作業の流れ

. ワークツリー領域でファイルを作成
. 「git add」コマンドを実行
. ローカルリポジトリ領域にファイル内容を元にした圧縮ファイルを作成
. ステージ領域に圧縮ファイルとファイル名を関連付けるインデックスを作成
. 「git commit」コマンドを実行
. ローカルリポジトリ領域にステージ領域のインデックスを元にツリーを作成
. ローカルリポジトリ領域にツリーのプロパティ（親コミット、作成者、日付、コメント）を示すコミットを作成


=== Gitのデータ構造

* ローカルリポジトリに「圧縮ファイル」「ツリー」「コミット」ファイルを作成することでデータを保存している
* コミットが親コミットを持つことで変更履歴を辿る事ができる
* **Git**とは**「データを圧縮して、スナップショットとして保存、ツリーとコミットによって、時系列の依存関係を保存し、バージョン管理をしているアプリケーション」**

== Gitを使おう

=== 新規でローカルリポジトリを作ろう

. ターミナル（Git Bash）を起動する

. プロジェクトのディレクトリを作成し、直下に移動する
+
[[app-listing]]
[source,git]
----
mkdir [ディレクトリ名]
cd [ディレクトリ名]
----

. 下記のコマンドを投入し、ローカルリポジトリを作成する
+
[[app-listing]]
[source,git]
----
git init
----

=== リモートリポジトリを元にローカルリポジトリを作ろう

. リモートリポジトリのURLを入手する

. ターミナル（Git Bash）を起動する

. プロジェクトのディレクトリを作成したいディレクトリの直下に移動する
+
[[app-listing]]
[source,git]
----
cd [ディレクトリ名]
----

. 下記のコマンドを投入し、リモートリポジトリを複製する
+
[[app-listing]]
[source,git]
----
git clone [リモートリポジトリのURL]
----

=== ファイルの変更をステージに追加しよう

*_Q . なぜステージ領域を使いますか？_*

**A . リポジトリへ変更したい変更だけを選択するため。**

. ターミナル（Git Bash）を起動する

. 下記のコマンドを投入し、ファイルの変更をステージに追加する
+
[[app-listing]]
[source,git]
----
git add .
----

=== ファイルの変更を記録しよう

. ターミナル（Git Bash）を起動する

. 下記のコマンドを投入し、ファイルの変更を記録する
+
[[app-listing]]
[source,git]
.optionなし
----
git commit
----

. エディターが立ち上がる

. エディターにコミットメッセージを記載し、保存する

. ターミナルに戻り、コミットメッセージ、コミットした内容が表示されていることを確認する

=== コミットメッセージをわかりやすく書こう

* *かんたんに書くとき* +
1行目：変更内容の要点と理由 +
2行目：書かない

* *正式に書くとき* +
1行目：変更内容の要約 +
2行目：空白 +
3行明：変更した理由

=== 現在の変更状況を確認しよう

. ターミナル（Git Bash）を起動する

. 下記のコマンドを投入し、ファイルの変更を記録する
+
[[app-listing]]
[source,git]
----
git status
----

. ステータスが表示される
+
[[app-listing]]
[source,git]
.リポジトリとステージ、ステージとワークツリーに差分がないとき
----
On branch master
nothing to commit, working tree clean
----
+
[[app-listing]]
[source,git]
.ステージとワークツリーに差分があるとき
----
Changes not staged for commit:
    mofdified:  filename1
----
+
[[app-listing]]
[source,git]
.リポジトリとステージに差分があるとき
----
Changes to be committed:
    mofdified:  filename1
----

=== 変更差分を確認しよう

== 用語集

Git::
  
    * *ワークツリー* +
    
    * *ステージ* +

    * *ローカルリポジトリ* +

    * *リモートリポジトリ* +

    * *Git Object* +
    「.git/objects」配下に保存されるgitデータ
    ** *Blob Object* +
    ファイルをハッシュ関数で40文字の英数字に変換したもの
    ** *Tree Object* +
    Blob ObjectまたはTree Objectとファイル名を紐付けたもの +
    ディレクトリ階層がある場合、子ディレクトリのTree Objectは親ディレクトリのTree Object内に含まれる
    ** *Commit Object* +
    コミットした時点でのファイルとその構成、状態を示したもの +
    最上位のTree Object、親Commit Object、変更者情報、変更コメントが記載される

Gitコマンド::
    * *git config* +
    aaaaaa
    * *git add* +
    aaaaaa
    * *git commit* +
    コミットする
    ** *-m "メッセージ"* +
    エディターを立ち上げずにコミットする
    ** *-v* +
    変更内容を表示してからコミットする
    * *git status* +
    前回ステージに追加
     